---
title: Docker Study Chapter 15
date: 2023-11-26 08:21:00 +0900
aliases: 
tags:
  - docker
  - security
  - study
categories: 
updated: 2023-11-26 08:54:11 +0900
---

# 보안 원격 접근 및 CI/CD 를 위한 도커 설정

## 도커 API 의 엔드포인트 형태

도커 엔진을 원격 접속하기 위한 설정을 살펴보자

- 가장 간단한 것은 HTTP 를 통한 접근

그러나 보안에 매우 취약해지므로 반드시 피해야 한다.

원격에 위치한 도커 엔진을 다룰 때는 어떤 명령을 내리든 그 명령을 해당 서버의 입장에서 생각해야 한다. 볼륨을 마운트 하는 경우 컨테이너에는 **원격 서버의 디스크**가 마운트된다.

## 보안 원격 접근을 위한 도커 엔진 설정

HTTP 외의 방법이 두 가지 더 있다.

- [[Transport Layer Security|TLS]] : 널리 사용되는 방법이지만 인증서를 생성하고 관리에 오버헤드 발생
- SSH: 접근 권한 관리가 상대적으로 쉬움

도커 엔진에 보안 원격 접근을 설정하고 싶다면 해당 컴퓨터에 접근해야만 한다.

도커 데스크톱의 도커 엔진은 보안 원격 접근 설정이 불가능하다. 도커 데스크탑의 도커 엔진은 로컬의 가상 머신에서 실행되는데 이 가상 머신의 도커 API 채널을 설정할 방법이 없기 때문이다.

## 도커 컨텍스트를 사용해 원격 엔진에서 작업하기

도커 컨텍스트를 사용하면 원격을 접근할 도커 엔진을 편리하게 전환할 수 있다.

컨텍스트는 여러 개를 만들 수도 있으며 원격 접근에 필요한 상세 정보는 모두 로컬 컴퓨터에 지정된다.

컨텍스트를 전환하는 방법에는 두 가지가 있는데,

- 해당 터미널 세션에만 적용되는 임시적인 전환
- 다른 터미널 세션에도 모두 적용되는 영구적인 전환

이 방법들의 차이를 인지하고 있지 않으면 컨텍스트가 전환되었다는 것을 잊고 운영환경의 컨테이너를 삭제하게 될 수 있다.

## 지속적 통합 파이프라인에 지속적 배포 추가하기
