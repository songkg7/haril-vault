---
title: Bean Scope
date: 2023-07-15T14:24:00
aliases: 
tags:
  - spring
  - bean
  - scope
  - singleton
  - prototype
categories: Spring
updated: 2025-01-07T00:35
---

## Bean Scope(빈 스코프)

빈 스코프는 [[Spring framework|Spring]]에서 빈(Bean) 객체의 생명주기와 범위를 정의하는 방법을 말한다. 빈은 스프링 컨테이너에 의해 생성되고 관리되는 객체이며, 스프링 애플리케이션에서 사용되는 주요한 구성 요소이다.

빈 스코프는 다음과 같은 종류가 있다:

1. Singleton(싱글톤): 하나의 빈 객체가 애플리케이션 전체에서 공유되어 사용된다. 기본적으로 모든 빈은 싱글톤 스코프로 생성된다. 따라서 동일한 빈을 여러 개의 클라이언트가 공유하며, 상태를 가지고 있을 경우 주의해야 한다.
2. Prototype(프로토타입): 매번 요청할 때마다 새로운 빈 객체를 생성한다. 각각의 클라이언트에게 독립적인 상태를 가지는 빈을 생성할 때 사용된다.
3. Request(요청): 웹 애플리케이션에서 각각의 HTTP 요청마다 새로운 빈 객체를 생성한다. 각각의 HTTP 요청에 대해 독립적인 상태를 가지는 빈을 생성할 때 사용된다.
    - [[Spring MVC|Spring MVC]] 의존성 필요
4. Session(세션): 웹 애플리케이션에서 각각의 세션마다 새로운 빈 객체를 생성한다. 각각의 세션에 대해 독립적인 상태를 가지는 빈을 생성할 때 사용된다.
    - [[Spring MVC|Spring MVC]] 의존성 필요

%%5. Global session(전역 세션): 포틀릿(Portlet) 환경에서 사용되며, 각각의 포틀릿 컨테이너마다 새로운 빈 객체를 생성한다.%%

빈 스코프는 XML 설정 파일이나 어노테이션을 통해 정의할 수 있다. 스프링 프레임워크는 스코프에 따라 적절한 빈 객체를 생성하고 관리하여 메모리 효율성과 의도한 동작을 보장한다. 이를 통해 애플리케이션의 확장성과 유연성을 개선할 수 있다.

## Singleton

- 스프링 컨테이너와 생명주기를 같이 한다.
    - `@PreDestroy`, `@PostConstruct` 와 같은 어노테이션 사용이 가능하다.
- 항상 같은 인스턴스를 사용한다.

## Prototype

- 독립된 생명 주기를 가진다
- 요청이 발생할 시마다 새로운 인스턴스를 생성한다.
- 콜백 메서드들이 적용되지 않는다.

## Singleton Bean 과 Prototype Bean 을 같이 사용할 시 주의점

Singleton 은 스프링 컨테이너와 같은 생명주기를 가지기 때문에 Singleton 내부에 Prototype 이 주입되어 사용된다면 의도와는 다른 결과를 얻게될 수 있다.

## Prototype 은 언제 사용해야하는가

- 여러 인스턴스를 검색해야 하는 경우
- 인스턴스를 지연 혹은 선택적으로 찾아야하는 경우
- 순환 종속성을 깨기 위해
- 스코프에 포함된 인스턴스로부터 더 작은 범위의 인스턴스를 찾아 추상화하기 위해

## Request

## Session

## Reference

- https://catsbi.oopy.io/b2de2693-fd8c-46e3-908a-188b3dd961f3
