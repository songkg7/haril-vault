---
title: Cache
date: 2024-02-21 10:59:00 +0900
aliases: 
tags:
  - cache
categories: 
updated: 2024-04-18 21:51:11 +0900
---

## Cache 의 개념

Cache는 컴퓨터 과학에서 데이터나 값을 미리 복사해 놓는 임시 장소를 가리키며, 이를 통해 빠른 접근 속도를 제공하고, 원래의 데이터를 접근하거나 계산하는 시간을 줄여준다. 캐시는 일반적으로 CPU와 메모리 사이에 위치하여 CPU가 필요로 하는 데이터를 빠르게 제공한다.

캐시는 원래의 데이터 저장소보다 더 빠르게 접근할 수 있도록 설계되어 있으며, 자주 사용되는 데이터나 명령어들을 저장한다. 이러한 캐싱 메커니즘은 CPU의 성능 향상, 메모리 읽기/쓰기 속도 개선 등 다양한 이점을 제공한다.

또한, 웹 브라우징, 비디오 스트리밍 등 많은 응용 프로그램에서도 캐시가 사용된다. 예를 들어, 웹 브라우저는 웹 페이지의 요소들(이미지, 스크립트 등)을 캐시에 저장하여 다음 방문 시에 페이지 로딩 시간을 줄인다.

캐시의 단점으로는 데이터 일관성 유지가 어렵다는 점이 있다. 캐시에 저장된 데이터와 원본 데이터 사이에 차이가 발생할 수 있기 때문에, 이를 동기화 하는 방법이 필요하다.

## Cache 는 memory 로만 구현할 수 있을까?

캐시는 메모리 외에도 다양한 방식으로 구현될 수 있다. 메모리를 이용한 캐시가 가장 일반적이지만, 하드 드라이브, SSD 등의 저장장치, 또는 네트워크를 통해 데이터를 캐시하는 경우도 있다.

예를 들어, 웹 브라우저는 사용자의 하드 드라이브에 웹 페이지의 요소들을 캐싱하며, [[Content Delivery Network|CDN]]은 전 세계에 분산된 서버 네트워크에 데이터를 캐싱하여 사용자에게 더 빠른 응답 시간을 제공한다.

또한, 데이터베이스 시스템에서는 디스크 I/O의 비용을 줄이기 위해 메모리 내에 결과를 캐싱하고 재사용한다. 이러한 방식은 메모리 캐시와 비슷하지만, 디스크와 같은 영구적인 저장 매체에 저장된 데이터를 복제하는 형태로 작동한다.

따라서 캐시는 반드시 메모리로만 구현될 필요가 없으며, 상황과 요구 사항에 따라 다양한 방식으로 구현될 수 있다.

## 캐시 전략

1. 직접 매핑(direct-mapped) 캐시
    - 데이터가 저장될 위치를 정해놓고, 그 위치에 데이터를 저장하는 방식이다.
    - 장점: 구현이 간단하고, 빠른 접근 속도를 제공한다.
    - 단점: 캐시 충돌(cache conflict) 문제가 발생할 수 있다. 즉, 여러 데이터가 동일한 위치에 매핑되어야 하는 경우 충돌이 발생하여 성능이 저하될 수 있다.

2. 연관 매핑(set-associative) 캐시
    - 직접 매핑 방식의 단점을 보완하기 위해 사용되는 방식으로, 여러 개의 데이터를 동일한 위치에 저장할 수 있도록 한다.
    - 장점: 직접 매핑보다 더 많은 데이터를 저장할 수 있다.
    - 단점: 구현이 복잡하며, 여전히 캐시 충돌 문제가 발생할 수 있다.

3. N-Way 연관 매핑(fully associative cache)
    - 가장 유연한 캐시 전략으로, 모든 블록을 어떠한 위치에나 저장할 수 있도록 한다.
    - 장점: 최적의 성능을 제공한다.
    - 단점: 구현이 가장 복잡하며, 직접 매핑과 비교해 더 많은 하드웨어 적용이 필요하다.

## 캐시의 크기 결정

캐시의 크기는 캐시를 이용한 성능 향상에 중요한 역할을 한다. 캐시의 크기가 너무 작으면 성능 향상이 제한될 수 있지만, 너무 큰 경우에는 비용 문제가 발생할 수 있다.

캐시의 크기를 결정하는 방법으로는 다음과 같은 것들이 있다.

1. 용량 결정
    - 프로그램에서 사용되는 데이터의 양을 기반으로 캐시의 용량을 결정한다.
    - 용량이 부족하면 충분히 많은 데이터를 저장하지 못해 적중률(hit rate)이 낮아질 수 있다.

2. 연관성 결정
    - 직접 매핑과 연관 매핑 방식 중 어느 것을 선택할지 결정한다.
    - 직접 매핑은 구현이 간단하지만, 연관 매핑 방식보다 더 높은 충돌 확률이 있으며, 반대로 연관 매핑은 구현이 복잡하지만 충돌 확률이 낮아진다.

3. 적중률 최적화
    - 적중률 최적화는 캐시의 크기를 결정하기 위해 사용되는 가장 중요한 요소 중 하나이다.
    - 적중률이 높을수록 성능 향상 효과가 높아지므로, 가능한 모든 데이터가 캐시에 저장될 수 있도록 캐시의 크기를 설정한다.
