---
title: 인규님 면접 내용
date: 2024-04-14 17:18:00 +0900
aliases: 
tags: 
categories: 
updated: 2024-04-14 18:10:26 +0900
---

- AB test
- 인증 상속
    - interface 의 default 메서드에 대부분의 로직이 있었다.
    - abstract default
- feature flag 에 대한 설명
    - 기본적으로 비활성화하여 구현
    - 쓰는 이유 - 특정 기능을 원격에서 조작하고 싶을 때
        - 컨트롤은 어떻게 하셨을까?
    - production 에서는 기능을 동작시키고 싶지 않았다
- 기능을 단위로 올리기보다 한꺼번에 테스트로
- 우선배차 기능. 우선배차 대상 유저가 다른 유저들보다 먼저 배차하도록 개발에 대해서
    - 지역별로 유저 순서 보정이 필요했다
    - 강남에 있는데 건대입구에서 택시를 타는 경우, 별개의 지역이라 순서를 나누기 애매.
    - 지역별로 나눌때 큐가 너무 많이 필요할 수 있다
    - 원래 유저에게 패널티를 주는 방식으로 구현
    - 일부로 계속 기다리게 함
    - 흑자 전환에 크게 도움이 되진 않음
    - DB lock 을 통해 동시성 제어
        - 우선배차인 유저가 다른 사람들의 배차를 뺏을 수 있기 때문에 동시성 문제 발생
        - 낙관적 락도 생각은 했으나 DB lock 으로 해결
        - 성능이 중요하지 않았음
        - 분산락을 쓰게 되는게 더 좋지 않았을까
- 특정 프로토콜 재사용
    - 홈 화면 배차 여부
- 월 단위 정산 정합성 문제에 대한 질문
    - SQS 의 데드레터 큐
    - 멱등성을 고려하였다
    - SQS 에 대한 의존성과 가용성, failover 전략에 대한 고민
        - 이벤트들은 DB 에 저장되어 있어서 SQS 가 다시 뜨게 되면 연동시킬 수 있음
- 확장성 있는 프로토콜 설계
    - 정산 화면을 보여줄 때 여러가지 바뀔 수 있는 부분
- 가장 기억에 남는 장애 상황
    - 카카오택시 장애
    - 보통 택시 서비스는 오후 10시 11시가 피크
    - 10초만에 DB CPU 가 100%
    - 평소 모니터링 하면서 배차 쪽이 트래픽이 많았어서
    - 30초마다 재시도하는 로직
- 문서화가 레거시가 되는 현상에 대해서 어떻게 대응하시는지
    - 제일 좋은건 github 으로 관리하는 것
    - 의미 있는 것은 코드레벨이 아니고 아키텍처나 인프라 레벨의 부분
    - 장애가 났을 때 대응 메뉴얼이나 장애 기록같은건 중요
    - 온보딩 문서에서 문서가 레거시가 되는 현상이 있었음
    - 최신화는 누가해야할까에 대한 고민
        - protobuf 를 쓰고 있어서 그런 고민은 덜 했지만, 주로 백엔드가 스펙 정리
        - 결국 하는 사람만 한다. 강제하는 것은 안좋다.
- 타다에서는 관리하는 gps 데이터에 대한 설명
- 프레임워크 버전 업그레이드에 관한 질문
    - keyclock 이라는 인증서비스를 사용했었는데 springboot 3.0 에서는 제공하지 않았다
    - 쿼리가 깨지는 것이 힘들었다
    - integration test 도 있었지만 카나리 배포를 통해 다시 한 번 확인
        - 스레드풀이 변경되었다던지는 카나리로만 확인 가능
- parallel gc 와 g1gc 의 차이와 변경 이후 장점은 뭐가 있었는지
    - parallel 은 한번에 old 를 처리, g1gc 는 조금씩 처리하는 방식
    - g1gc 는 메모리를 좀 더 써야한다
    - STW 를 거의 안 보게 된다
- STW 가 발생할 때 다른 스레드를 모두 멈춰야하는 이유를 알고 계신지?
- GC 대상이라는 것을 어떻게 판단할 수 있을까?
    - 루트 객체를 타고 갔을 때 참조하는 객체라면 GC 대상이 아님
    - 참조할 수 없다면 GC 대상이 될 수 있다