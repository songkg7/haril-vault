---
title: TCC Pattern
date: 2024-01-27 14:43:00 +0900
aliases: 
tags:
  - distribution
  - 2pc
categories: 
updated: 2024-10-05 11:44:36 +0900
---

## TCC 패턴이란?

TCC(Try-Confirm-Cancel) 패턴은 분산 트랜잭션 처리를 위한 소프트웨어 아키텍처 패턴입니다. 이 패턴은 여러 서비스 간에 분산된 트랜잭션을 처리할 때, 데이터 일관성과 안정성을 보장하기 위해 사용됩니다.

TCC 패턴은 세 단계로 이루어져 있습니다. 첫 번째 단계는 "Try" 단계로, 작업을 시도하는 단계입니다. 이때 예약 정보나 잠금 등의 작업이 수행됩니다. 두 번째 단계는 "Confirm" 단계로, 모든 작업이 성공적으로 완료되었을 경우에만 실제로 적용되는 단계입니다. 마지막으로 세 번째 단계인 "Cancel" 단계에서는 앞선 작업들이 실패한 경우 롤백이 수행되어 원래 상태로 되돌리는 작업을 수행합니다.

이러한 TCC 패턴은 분산 환경에서의 트랜잭션 처리를 보다 안전하고 일관성 있게 할 수 있는 장점이 있습니다. 하지만 구현하기가 복잡하며, 모든 서비스가 동일한 프로토콜과 인터페이스를 사용해야 한다는 제약이 있습니다. 따라서 TCC 패턴을 사용하기 전에 장점과 단점을 고려하여 적절한 상황에서 사용해야 합니다.

## 장점

- 일관성 유지 유리
- 쉬운 구현 가능

## 단점

- 구현이 쉽지만 운영이 쉽지는 않음
- 취소/확정 예외 처리
- 재시도 처리 필요
- 제대로 대비하지 않으면 일관성이 깨진다