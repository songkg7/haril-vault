---
title: file descriptor
date: 2024-02-20T13:54:00
aliases:
  - fd
tags:
  - linux
  - file
categories: 
updated: 2025-01-07T00:35
---

## File descriptor 란?

파일 디스크립터(File Descriptor)는 운영 체제에서 파일 핸들링을 위해 사용하는 추상적인 표현 방식입니다. fd 는 운영 체제가 열린 파일, 소켓, 파이프 및 기타 통신이나 데이터 스트림을 추적하는 데 사용하는 광범위한 식별자 범주의 일부입니다.

### 할당

운영체제는 열린 파일, 소켓, 네트워크 연결, 파이프 등 모든 입출력을 관리하기 위해 파일 디스크립터를 사용합니다. 각각의 입출력 스트림은 고유한 파일 디스크립터를 가지게 되며, 이는 정수 형태로 표현됩니다.

파일이나 리소스가 열리면 운영 체제의 커널은 파일을 추적하기 위해 전역 테이블에 항목을 만들고 파일을 연 프로세스에 fd 를 반환합니다. 이 fd 는 본질적으로 이 전역 테이블에 대한 인덱스입니다. 프로그램은 읽기, 쓰기, 닫기 등 파일이나 리소스에 대한 후속 작업에 이 설명자를 사용합니다.

### 표준 fd

일반적으로 프로그램이 시작할 때, 운영체제는 표준 입력(stdin), 표준 출력(stdout), 표준 에러(stderr)에 대한 파일 디스크립터를 할당합니다. 이들의 값은 각각 0, 1, 2이며 이외의 다른 모든 항목들은 3부터 시작하는 숫자를 할당받습니다.

파일 디스크립터는 짧고 간단한 정수로써 **프로세스 내에서 유일하게 식별**됩니다. 프로세스가 파일을 열면 운영 체제는 해당 프로세스에 대해 사용 가능한 가장 낮은 숫자의 파일 디스크립터를 생성하고 반환합니다.

프로그램이 입출력 작업을 수행할 때마다 이 파일 디스크립터를 참조하여 해당 작업이 어떤 파일에 대해 수행되어야 하는지 운영 체제에 알립니다. 따라서 파일 디스크립터는 프로그램과 운영체제 간의 통신 수단으로서 중요한 역할을 합니다.

fd 를 간단한 정수로 표현하고 파일이나 리소스에 대한 구체적인 정보는 테이블에 숨김으로써, 프로세스는 각 파일의 특정 세부 정보를 추적하지 않고도 여러 파일과 리소스를 동시에 관리할 수 있습니다. fd 가 제공하는 추상화를 통해 개발자는 복잡한 파일 구조나 하드웨어 인터페이스를 직접 사용하는 대신 간단한 정수 식별자를 사용하여 작업할 수 있으므로 I/O 작업을 수행하는 프로그램을 더욱 쉽게 작성할 수 있습니다.

파일 디스크립터를 사용하면 여러 가지 입출력 작업을 일관된 방식으로 처리할 수 있으며, 복잡한 파일 시스템 내부의 상세 구현을 숨기고 단순화된 인터페이스를 제공합니다. 때문에 개발자는 파일 디스크립터에 집중하여 입출력 관련 프로그래밍을 할 수 있습니다.

## fd 확인하기

```bash
ps -ef | grep sshd
```

```bash
sudo ls -trn /proc/[PID]/fd
```

## Reference

- https://twofootdog.tistory.com/51